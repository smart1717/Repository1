<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<!-- 导入jquery核心类库 -->
	<script type="text/javascript" src="../js/jquery-1.8.3.js"></script>
	<!-- 导入easyui类库 -->
	<link id="easyuiTheme" rel="stylesheet" type="text/css" href="../js/easyui/themes/default/easyui.css">
	<link rel="stylesheet" type="text/css" href="../js/easyui/themes/icon.css">
	<link rel="stylesheet" type="text/css" href="../css/default.css">
	<script type="text/javascript" src="../js/easyui/jquery.easyui.min.js"></script>
	<script type="text/javascript">
		
		$(function() {
			$('#grid').datagrid({
				url : 'datagrid_data.json',
				columns : [ [ {
					field : 'id',
					title : '编号',
					width : 100
				}, {
					field : 'name',
					title : '名称',
					width : 100,
					//要编辑时的可编辑组件
					editor:{
						//组件的名字类型，easyui的form中的组件
						type:"validatebox",
						//可编辑组件的属性
						options:{
							required:true
						}
					}
				}, {
					field : 'price',
					title : '价格',
					width : 100,
					align : 'right',
					//要编辑时的可编辑组件
					editor:{
						//组件的名字类型，easyui的form中的组件
						type:"datebox",
						//可编辑组件的属性
						options:{
							required:true
						}
					}
				} ] ]
				,toolbar: [{
					text: '打开编辑',
					handler: function(){
						//alert('打开编辑')
						//获取选中的行
						var row=$("#grid").datagrid("getSelected");
						
						//根据行获取索引
						var index=$("#grid").datagrid("getRowIndex",row);
						
						//打开指定索引的行的编辑
						$("#grid").datagrid("beginEdit",index);
						
					}
				},{
					text: '结束编辑',
					handler: function(){
						//alert('结束编辑')
						//获取选中的行
						var row=$("#grid").datagrid("getSelected");
						
						//根据行获取索引
						var index=$("#grid").datagrid("getRowIndex",row);
						
						//打开指定索引的行的编辑
						$("#grid").datagrid("endEdit",index);
						
						
					}
				},{
					text: '取消编辑',
					handler: function(){
						//alert('取消编辑')
						//alert('结束编辑')
						//获取选中的行
						var row=$("#grid").datagrid("getSelected");
						
						//根据行获取索引
						var index=$("#grid").datagrid("getRowIndex",row);
						
						//打开指定索引的行的编辑
						$("#grid").datagrid("cancelEdit",index);
					}
				}]
			//结束编辑的事件
			//参数1：结束编辑的行的索引
			//参数2：结束编辑的行的最终数据json
			//参数3：介绍编辑的行的改变的数据json
			,onAfterEdit:function(index, row, changes){
				//alert(1);
				console.log(row);//全数据
				console.log(changes);//改变的数据
				
			}

			});
		});
	</script>
</head>
<body>
	<table id="grid"></table>  
</body>
</html>